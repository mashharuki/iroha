"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _lodash=_interopRequireDefault(require("lodash.isequal")),_lodash2=_interopRequireDefault(require("lodash.isplainobject"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var assetIdDelimiter="#",accountIdDelimiter="@",accountDetailsKeyPattern=/^[A-Za-z0-9_]{1,64}$/,accountDetailsValueLenght=4096,accountPattern=/^[a-z_0-9]{1,32}$/,domainPattern=/^[a-z_0-9]{1,9}$/,roleNamePattern=/^[a-z_0-9]{1,32}$/,assetNamePattern=/^[a-z_0-9]{1,32}$/,allowEmpty=["key","writer"],schema={amount:checkAmount,precision:checkPresission,accountName:checkAccountName,accountId:checkAccountId,domainId:checkDomain,assetId:checkAssetId,srcAccountId:checkAccountId,destAccountId:checkAccountId,description:checkDescription,quorum:checkQuorum,assetName:checkAssetName,roleName:checkRoleName,defaultRole:checkRoleName,key:checkAccountDetailsKey,value:checkAccountDetailsValue,roleId:checkRoleName,writer:checkAccountId,peerKey:toImplement,publicKey:toImplement,permissionsList:toImplement,permission:toImplement,txHashesList:toImplement,address:toImplement,pageSize:toImplement,firstTxHash:toImplement,height:toImplement};function toImplement(){return{isValid:!0}}var compare=function(c,a){return c-a};function validateParams(a,b){if(!(0,_lodash2["default"])(a))throw new Error("Expected type of arguments: object, actual: ".concat(_typeof(a)));var c=(0,_lodash["default"])(Object.keys(a).sort(compare),b.sort(compare));if(!c)throw new Error("Expected arguments: ".concat(b,", actual: ").concat(Object.keys(a)));var d=b.map(function(b){var c=schema[b];return allowEmpty.includes(b)?[b,{isValid:!0}]:[b,c(a[b])]}).reduce(function(b,c){return!1===c[1].isValid&&b.push(new Error("Field \"".concat(c[0],"\" (value: \"").concat(a[c[0]],"\") is incorrect\nReason: ").concat(c[1].reason))),b},[]);if(d.length)throw d;return a}function checkAmount(a){var b=Number.MAX_SAFE_INTEGER,c=Number.isFinite,d=+a;return c(d)?0>d?{isValid:!1,reason:"Amount should be positive"}:d>b?{isValid:!1,reason:"Amount does not fit into MAX_SAFE_INTEGER"}:{isValid:!0}:{isValid:!1,reason:"Amount should be a number"}}function checkPresission(a){return 0>a||255<a?{isValid:!1,reason:"Precision should be 0 <= precision <= 255"}:{isValid:!0}}function checkAccountName(a){return accountPattern.test(a)?{isValid:!0}:{isValid:!1,reason:"Account name should match ".concat(accountPattern)}}function checkAssetName(a){return assetNamePattern.test(a)?{isValid:!0}:{isValid:!1,reason:"Asset name should match ".concat(assetNamePattern)}}function checkDomain(a){return domainPattern.test(a)?{isValid:!0}:{isValid:!1,reason:"Domain should match ".concat(domainPattern)}}function checkAccountId(a){var b=a.split(accountIdDelimiter);if(2!==b.length)return{isValid:!1,reason:"Account ID should match account@domain"};var c=checkAccountName(b[0]),d=checkDomain(b[1]);return c.isValid?d.isValid?{isValid:!0}:d:c}function checkAssetId(a){var b=a.split(assetIdDelimiter);if(2!==b.length)return{isValid:!1,reason:"Asset ID should match asset#domain"};var c=checkAssetName(b[0]),d=checkDomain(b[1]);return c.isValid?d.isValid?{isValid:!0}:d:c}function checkDescription(a){return 64<a.length?{isValid:!1,reason:"Description length should be smaller then 64 symbols"}:{isValid:!0}}function checkQuorum(a){return 0>a||128<a?{isValid:!1,reason:"Quorum should be 0 < quorum <= 128"}:{isValid:!0}}function checkRoleName(a){return roleNamePattern.test(a)?{isValid:!0}:{isValid:!1,reason:"Role name should match ".concat(roleNamePattern)}}function checkAccountDetailsKey(a){return accountDetailsKeyPattern.test(a)?{isValid:!0}:{isValid:!1,reason:"Key should match ".concat(accountDetailsKeyPattern)}}function checkAccountDetailsValue(a){return a.length>accountDetailsValueLenght?{isValid:!1,reason:"Value length should be smaller then ".concat(accountDetailsValueLenght)}:{isValid:!0}}var _default=validateParams;exports["default"]=_default;